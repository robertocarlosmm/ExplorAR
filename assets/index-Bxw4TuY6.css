:root{--bg: #f7f5e9;--brand: #8b3e0f;--text: #222;--radius: 12px;--shadow: 0 4px 8px rgba(0, 0, 0, .15)}html,body{height:100%;margin:0;padding:0}body,button,input,textarea{font-family:Inter,Noto Sans,Roboto,sans-serif;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased}body{font-family:Inter,sans-serif;background:var(--bg);color:var(--text);display:flex;justify-content:center;align-items:center;overscroll-behavior:none;-webkit-user-select:none;user-select:none;-webkit-touch-callout:none}canvas,#hud{-webkit-tap-highlight-color:transparent}.container{width:100%;max-width:480px;height:100%;display:flex;flex-direction:column}.screen{display:none;flex:1;flex-direction:column;justify-content:space-between;align-items:center;padding:20px;box-sizing:border-box}.screen.active{display:flex}header h1{font-size:1.8rem;margin:0;text-align:center}.instruction{margin-top:4px;margin-bottom:16px;font-size:1rem;color:#666;text-align:center}.grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;justify-content:center;align-items:start;flex:1;max-height:calc(100vh - 220px);overflow-y:auto;padding:10px}.card{background:#000;border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);cursor:pointer;display:flex;flex-direction:column;transition:transform .2s ease;width:150px;height:200px;flex-shrink:0}.card:hover{transform:translateY(-3px)}.card img{width:100%;height:145px;object-fit:cover;display:block;border-top-left-radius:var(--radius);border-top-right-radius:var(--radius)}.card-title{flex:1;display:flex;justify-content:center;align-items:center;font-weight:700;font-size:.85rem;color:#fff;text-align:center;padding:6px}.detail-card{background:#000;border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;text-align:center;width:100%;max-width:300px}.detail-card img{width:100%;height:220px;object-fit:cover;display:block}.detail-name{font-weight:700;font-size:1.2rem;color:#fff;padding:12px}.buttons{display:flex;flex-direction:column;gap:12px;width:100%}.btn{padding:12px;border:none;border-radius:var(--radius);font-size:1rem;cursor:pointer;transition:background .2s}.btn.primary{background:var(--brand);color:#fff}.btn.primary:hover{background:#722f0c}.btn.secondary{background:transparent;border:2px solid var(--brand);color:var(--brand)}.btn.secondary:hover{background:#f1e3d6}.footer-note{margin-top:12px;font-size:.9rem;color:#666;text-align:center}.hidden{display:none}#hud{position:fixed;inset:0;z-index:20;pointer-events:none;padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom)}#hud .hud-btn,#hud .panel *,#hud button,#hud a,#hud input,#hud select{pointer-events:auto}.hud-btn{background:#fffc;border:none;border-radius:50%;width:48px;height:48px;font-size:20px;cursor:pointer;transition:transform .15s ease,background .15s ease}.hud-btn:hover{transform:scale(1.1);background:#505050e6}.topbar{display:flex;gap:.75rem;align-items:center;position:absolute;top:calc(10px + env(safe-area-inset-top));left:0;right:0;padding:0 12px;justify-content:center}#hud .topbar #hud-score,#hud .topbar #hud-timer{background:#ffffffd9;color:#000;padding:4px 8px;border-radius:6px;border:1px solid rgba(0,0,0,.2);font-weight:600;font-size:.95rem;text-shadow:none;line-height:1.2;display:inline-block}#hud .topbar #hud-score{margin-right:6px}.spacer{flex:1}.panel{width:100%;position:absolute;left:0;bottom:0;padding:12px}#hud .bottombar,#hud .center-msg{position:absolute;left:0;right:0}#hud .bottombar{bottom:calc(10px + env(safe-area-inset-bottom));padding:12px;display:flex;justify-content:center;gap:8px}#hud .center-msg{top:50%;transform:translateY(-50%);text-align:center;padding:8px 12px}#center-msg{opacity:1;transition:opacity 1s ease;pointer-events:none}#center-msg.hidden{opacity:0}.center-msg.hidden{opacity:0;transition:opacity .2s}.hud-panel{position:absolute;top:0;left:0;width:100%;height:100%;background:#fffffff2;display:flex;align-items:center;justify-content:center;z-index:50}#renderCanvas{position:fixed;inset:0;width:100vw;height:100dvh;background:transparent;touch-action:none;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;z-index:0}@supports not (height: 100dvh){#renderCanvas{height:100vh}}#loading-screen{display:none;position:fixed;inset:0;background:#000;color:#fff;font-size:1.5em;display:flex;align-items:center;justify-content:center;z-index:1000}#game-end-popup{position:fixed;inset:0;background:#0000008c;display:flex;justify-content:center;align-items:center;z-index:50;pointer-events:auto;animation:popup-fade-in .25s ease-out}#game-end-popup.hidden{display:none}.popup-content{background:var(--bg);color:var(--text);border-radius:var(--radius);box-shadow:var(--shadow);text-align:center;padding:24px 28px;width:80%;max-width:320px;animation:popup-scale-in .25s ease-out}.popup-content h2{font-size:1.4rem;margin:0 0 16px;color:var(--brand);font-weight:700;text-shadow:0 1px 0 rgba(255,255,255,.5)}.popup-buttons{display:flex;justify-content:center;gap:12px;flex-wrap:wrap}.popup-buttons button{flex:1;min-width:120px;padding:10px 16px;border-radius:var(--radius);border:none;font-size:1rem;cursor:pointer;transition:background .2s,transform .1s ease}#btn-retry{background:transparent;border:2px solid var(--brand);color:var(--brand)}#btn-retry:hover{background:#f1e3d6}#btn-continue,#btn-continue-detail{background:var(--brand);color:#fff}#btn-continue,#btn-continue-detail{background:#722f0c}#hud #btn-continue{opacity:1;transform:scale(1);pointer-events:auto;transition:opacity .15s ease,transform .15s ease}#hud #btn-continue.hidden{opacity:0;transform:scale(.9);pointer-events:none}#experience-detail #btn-continue-detail{opacity:1;transform:scale(1);pointer-events:auto;transition:background .2s ease,transform .15s ease}@keyframes popup-fade-in{0%{opacity:0}to{opacity:1}}@keyframes popup-scale-in{0%{transform:scale(.95);opacity:0}to{transform:scale(1);opacity:1}}:focus-visible{outline:2px solid #2563eb;outline-offset:2px}#hud-panel-slot{position:absolute;inset:0;display:block;z-index:30;background:transparent;pointer-events:none}.panel-tutorial{position:absolute;inset:0;background-color:#f7f5e9;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:2rem;border-radius:0;z-index:40}.tutorial-title{font-size:1.6rem;font-weight:700;color:#8b3e00;margin-bottom:1rem}.tutorial-desc{font-size:1rem;color:#444;margin-bottom:1.5rem;max-width:320px}.tutorial-image img{width:100%;max-width:280px;border-radius:10px;margin-bottom:1.5rem;box-shadow:0 4px 10px #0003}#btn-start{background-color:#8b3e00;color:#fff;border:none;padding:.8rem 1.8rem;border-radius:10px;font-size:1rem;cursor:pointer;box-shadow:0 2px 6px #00000040}#btn-start:hover{background-color:#722f0c}.panel.panel-fullscreen{position:fixed!important;inset:0 0 auto auto!important;padding:0;display:flex;align-items:center;justify-content:center;pointer-events:auto}#minigame2-info-panel{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;gap:1.5rem;position:absolute;inset:0;background:#000000bf;color:#fff;padding:2rem;z-index:20;opacity:0;transform:scale(.97);transition:opacity .25s ease,transform .25s ease}#minigame2-info-panel.fade-in{opacity:1;transform:scale(1)}#minigame2-info-panel .panel-text{background:#ffffff1a;border-radius:12px;padding:1.5rem 2rem;max-width:700px;box-shadow:0 0 20px #00000040}#minigame2-info-panel h2{color:#ffdc7a;margin-bottom:1rem;font-size:1.8rem}#minigame2-info-panel p{font-size:1.1rem;line-height:1.5}#minigame2-info-panel.panel-info{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#f7f5e9;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:2rem;z-index:2147483647;transform:translateY(-4%);overflow:hidden;margin:0;box-sizing:border-box}#minigame2-info-panel .panel-text{background-color:#8b3e0f;color:#fff;border-radius:16px;padding:1.5rem 2.5rem;width:92%;max-width:460px;margin:0 auto;box-shadow:0 6px 18px #00000040;box-sizing:border-box;display:flex;flex-direction:column;align-items:center;justify-content:center}#minigame2-info-panel h2{font-size:1.8rem;font-weight:700;margin:0 0 .6rem;color:#fff}#minigame2-info-panel p{text-align:justify;text-justify:inter-word;font-size:.95rem;line-height:1.45;margin:0 0 1.2rem;width:96%;max-width:430px;margin-left:auto;margin-right:auto;color:#fff}#minigame2-info-panel .btn-primary{background-color:#fff;color:#8b3e0f;border:none;border-radius:10px;padding:.8rem 1.8rem;font-size:1rem;font-weight:600;cursor:pointer;box-shadow:0 3px 8px #00000040;transition:background-color .2s ease,transform .15s ease}#minigame2-info-panel .btn-primary:hover{background-color:#f7f5e9;transform:scale(1.05)}#hint-popup{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:#0000008c;z-index:2147483647;isolation:isolate;animation:hint-fade-in .25s ease-out;pointer-events:all}#hint-popup.hidden{display:none}.hint-card{background:#f6efe2;color:#5a2a14;width:85%;max-width:360px;padding:20px 24px;border-radius:14px;box-shadow:0 6px 16px #00000040;line-height:1.45;text-align:justify;animation:hint-scale-in .25s ease-out;z-index:1;pointer-events:auto}.hint-card .hint-title{background:#8b3e0f;color:#fff;text-align:center;font-weight:700;font-size:1.1rem;border-radius:10px;padding:8px 0;margin:-4px -4px 12px}.hint-card .hint-heading{font-weight:600;text-align:center;margin-bottom:10px}.hint-card ul{margin:0;padding-left:1.2em;list-style:disc}.hint-card li{margin:4px 0}.hint-card .hint-close-btn{display:block;margin:16px auto 4px;padding:10px 18px;border-radius:10px;background:#fff;color:#8b3e0f;border:2px solid #8b3e0f;font-weight:600;cursor:pointer;transition:all .15s ease}.hint-card .hint-close-btn:hover{background:#f8f5ef;transform:scale(1.03)}@keyframes hint-fade-in{0%{opacity:0}to{opacity:1}}@keyframes hint-scale-in{0%{transform:scale(.96);opacity:0}to{transform:scale(1);opacity:1}}.stars-container{display:flex;justify-content:center;align-items:center;gap:8px;margin-bottom:12px}.stars-container .star{width:40px;height:40px;filter:brightness(.3);opacity:.8;transition:filter .3s ease,transform .25s ease}.stars-container .star.active{filter:brightness(1) drop-shadow(0 0 3px rgba(255,215,0,.7));opacity:1;transform:scale(1.05)}.popup-extra-msg{margin-top:14px;margin-bottom:18px;font-size:1rem;color:var(--text);text-align:center;font-weight:500;line-height:1.4}
